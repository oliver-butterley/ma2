\documentclass[paper=A5,fontsize=12pt,openright,DIV=16,parskip=half*,chapterprefix=on]{scrbook}      
\usepackage[UKenglish]{babel}
\usepackage[hyperfootnotes,colorlinks=true,citecolor=black,urlcolor=darkgray,linkcolor=black]{hyperref}
\usepackage{ebgaramond}
\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=true,factor=1100,stretch=10,shrink=10,babel=true]{microtype}   % Better typography
\usepackage{lettrine}   % Add drop caps to chapter openings

%%%%%%%%%%%%%% setup format for section headings
\setkomafont{disposition}{\normalfont\scshape}
\addtokomafont{chapterentry}{\normalfont\itshape\large}
\addtokomafont{chapterentrypagenumber}{\normalfont\normalsize}
\renewcommand{\raggedchapter}{\centering}
\renewcommand{\raggedsection}{\centering}
%%%%%%%%%%% setup table of contents
\setcounter{tocdepth}{\sectiontocdepth}
\newcommand\gobble[1]{}
\DeclareTOCStyleEntry[entrynumberformat=\gobble,numwidth=0pt]{default}{chapter}
\DeclareTOCStyleEntry[entrynumberformat=\gobble,numwidth=0pt]{default}{section}
%%%%%%%%%%%%%%%%%%%%%%

\usepackage{svg} % automatically convert svg and include

% Include graphics from relevant folders
\usepackage{graphicx}
\graphicspath{{graphics/}{graphics/build/}}
\setkeys{Gin}{width=0.75\textwidth} % Default width

% Allow sub figures
\usepackage{caption}
\usepackage{subcaption}

% \usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amsthm}
\usepackage[type={CC},modifier={by-sa},version={4.0}]{doclicense}
\usepackage[skins,breakable,theorems]{tcolorbox}

\usepackage{pgfplots} \pgfplotsset{compat=1.10} % also includes tikz

%%%%%%%%%%%% inserting git sha
\usepackage{xstring}
\usepackage{catchfile}
% Set user input
\newcommand{\gitfolder}{.git}             % Relative path to .git folder from .tex file
\newcommand{\reponame}{oliver-butterley/ma2}    % Name of account and repo. Will be included in URL
% Based on this https://tex.stackexchange.com/questions/455396/how-to-include-the-current-git-commit-id-and-branch-in-my-document
\CatchFileDef{\headfull}{\gitfolder/HEAD}{}              % Get path to head file for checked out branch
\StrGobbleRight{\headfull}{1}[\head]                      % Remove end of line character
\StrBehind[2]{\head}{/}[\branch]                          % Parse out the path only
\CatchFileDef{\commit}{\gitfolder/refs/heads/\branch}{}  % Get the chapters of the branch head
\StrGobbleRight{\commit}{1}[\commithash]                  % Remove end of line character
% Build the URL to this commit based on the information we now have
\newcommand{\fullcommiturl}{\href{https://github.com/\reponame/commit/\commithash}{\texttt{\commithash}}}
\newcommand{\commiturl}{\href{https://github.com/\reponame/commit/\commithash}{\texttt{\StrLeft{\commithash}{7}}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%% BOOK INFORMATION %%%%%%%%%%
\newcommand{\authorname}{Everyone who contributed.}
\newcommand{\booktitle}{Mathematical Analysis~2}
% \newcommand{\subtitle}{Lecture notes 2021/22}
\newcommand{\sourcelink}{\href{https://github.com/oliver-butterley/ma2}{\texttt{github.com/oliver-butterley/ma2}}}
\newcommand{\editionyear}{2021}

\title{\booktitle}
\author{\authorname}
    
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem*{theorem*}{Theorem}
\newtheorem{task}[theorem]{Task} % Environment for exercises
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem*{lemma*}{Lemma}
\theoremstyle{definition}
\newtheorem{example}[theorem]{Example}
\newtheorem*{example*}{Example}
\newtheorem{definition}[theorem]{Definition}
\newtheorem*{definition*}{Definition}
\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem*{remark*}{Remark}

% Highlighted versions of definition and theorem
\tcolorboxenvironment{definition}{
    colback=blue!5!white, 
    arc=2mm,  enhanced, frame hidden, oversize,
    left=2mm,right=2mm,top=1mm,bottom=1mm}
\tcolorboxenvironment{theorem}{
    colback=blue!5!white, 
    arc=2mm,  enhanced, frame hidden, oversize,
    left=2mm,right=2mm,top=1mm,bottom=1mm}

\colorlet{paleBlue}{blue!10!white}

\usepackage{style/options}

%%%%%%%%% mathematics helpers
\newcommand{\abs}[1]{\left|#1\right|}
\newcommand{\bC}{\mathbb{C}} % Complex numbers
\newcommand{\bN}{\mathbb{N}} % Natural numbers
\newcommand{\bR}{\mathbb{R}} % Real numbers
\newcommand{\norm}[1]{\left\|#1\right\|} % Norm
\renewcommand{\aa}{\mathbf{a}}
\newcommand{\bb}{\mathbf{b}}
\newcommand{\cc}{\mathbf{c}}
\newcommand{\ee}{\mathbf{e}}
\newcommand{\ff}{\mathbf{f}}
\renewcommand{\gg}{\mathbf{g}}
\newcommand{\hh}{\mathbf{h}}
\newcommand{\rr}{\mathbf{r}}
\newcommand{\uu}{\mathbf{u}}
\newcommand{\vv}{\mathbf{v}}
\newcommand{\ww}{\mathbf{w}}
\newcommand{\xx}{\mathbf{x}}
\newcommand{\yy}{\mathbf{y}}
\newcommand{\zz}{\mathbf{z}}
\newcommand{\aalpha}{\boldsymbol{\alpha}}
\newcommand{\littleo}[1]{o(#1)}
%%%%%%%%%


% Light formatting for questions and solutions
\newcommand{\question}{\noindent \textbf{Question:} }
\newcommand{\solution}{\noindent \textbf{Solution:} }


\begin{document}

% Reduce space around displayed equations
% \setlength{\abovedisplayskip}{10pt}
% \setlength{\belowdisplayskip}{10pt}

\frontmatter
\input{frontmatter/titlepage}
\input{frontmatter/copyrightpage}
\input{frontmatter/preface}
\input{frontmatter/tocpage}

% \pagestyle{fancy}

\pagestyle{plain}
\input{chapters/part0}

\mainmatter

\input{chapters/part1}
\input{chapters/part2}
\input{chapters/part3}

\backmatter

\end{document}
